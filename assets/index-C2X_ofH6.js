(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function e(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=e(s);fetch(s.href,o)}})();const d=async(n="")=>{const t=`https://official-joke-api.appspot.com/jokes${n}/ten`;try{const e=await fetch(t);if(!e.ok)throw new Error(`Fetch failed with status - ${e.status}, ${e.statusText}`);return(e.headers.get("content-type")||"").includes("application/json")?[await e.json(),null]:[await e.text(),null]}catch(e){return console.warn(e),[null,e]}},u=async n=>{const t=`https://official-joke-api.appspot.com/jokes/${n}`;try{const e=await fetch(t);if(!e.ok)throw new Error(`Fetch failed with status - ${e.status}, ${e.statusText}`);return(e.headers.get("content-type")||"").includes("application/json")?[await e.json(),null]:[await e.text(),null]}catch(e){return console.warn(e),[null,e]}},p=n=>{const t=document.createElement("div");t.classList.add("flex-box");const e=document.createElement("button");e.textContent="Punchline!",e.dataset.jokeId=n.id;const a=document.createElement("button");return a.textContent="Guess",a.dataset.jokeId=n.id,t.append(a,e),t},h=(n,t)=>{const e=document.createElement("li");return e.innerHTML=`<p>${t.setup}</p>`,e.dataset.jokeId=t.id,e.dataset.answered="false",e.classList.add("flex-box"),e.append(p(t)),e},m=n=>{document.querySelector("ul").innerHTML="";for(const t of n[0]){const e=h(document.createElement("li"),t);document.querySelector("ul").append(e)}},y=(n,t)=>{const e=document.querySelector("#guessGame");e.replaceChildren();const a=document.createElement("div");a.classList.add("modal-content","column-flex-box"),a.innerHTML=`
  <div class="flex-box">
    <h2>${n.setup}</h2>
    <span class="close">&times;</span>
  </div>
  `;const s=document.createElement("div");s.classList.add("grid-2-column"),e.style.display="block";const o=new Map;o.set(n.id,n);const c=Math.floor(Math.random()*4);let l=0;for(;l<4;){const i=Math.floor(Math.random()*t.length);if(c===l){const r=document.createElement("button");r.dataset.correct=!0,r.textContent=n.punchline,s.append(r),l++}else{if(o.has(t[i].id))continue;{o.set(t[i].id,t[i]);const r=document.createElement("button");r.dataset.correct=!1,r.textContent=t[i].punchline,s.append(r),l++}}}a.append(s),e.append(a)},g=async()=>{const n=document.querySelectorAll("li");for(const t of n)if(t.children[0].textContent===f){const e=await u(t.dataset.jokeId);t.dataset.answered==="false"?t.append(p(e[0])):t.innerHTML=`<p>${e[0].setup}</p><p>    </p><p>${e[0].punchline}</p>`}},x=async n=>{n.preventDefault();const t=document.querySelector("#jokeTypeSelect").value;m(await d(t)),n.target.reset()};let f="placeholder";const w=async n=>{if(n.target.matches("button")){const t=await u(n.target.dataset.jokeId);if(n.target.textContent==="Punchline!")n.target.parentElement.parentElement.innerHTML=`<p>${t[0].setup}</p><p>    </p><p>${t[0].punchline}</p>`;else if(n.target.textContent==="Guess"){const e=await d();y(t[0],e[0]),f=t[0].setup,n.target.parentElement.parentElement.innerHTML=`<p>${t[0].setup}</p>`}}},E=async n=>{if(n.target.matches("button")){const t=n.target.parentElement.parentElement.children[0].children[0].textContent;if(n.target.dataset.correct==="true"){document.querySelector("#guessGame").innerHTML=`
    <div class="flex-box modal-content">
      <h2>Ha Ha! Yeah!!</h2>
      <span class="close">&times;</span>
    </div>
    `;const e=document.querySelectorAll("li");for(const a of e)a.children[0].textContent===t&&(a.dataset.answered="true")}else document.querySelector("#guessGame").innerHTML=`
    <div class="flex-box modal-content">
      <h2>Nah. thats not it...</h2>
      <span class="close">&times;</span>
    </div>
    `}},L=async n=>{!n.target.matches(".close")&&n.target.matches("div, div > *")||(n.currentTarget.style.display="none",g())},b=async()=>{m(await d()),document.querySelector("form").addEventListener("submit",x),document.querySelector("ul").addEventListener("click",w),document.querySelector("#guessGame").addEventListener("click",E),document.querySelector("#guessGame").addEventListener("click",L)};b();
