(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();const p=async(e="")=>{const t=`https://official-joke-api.appspot.com/jokes${e}/ten`;try{const n=await fetch(t);if(!n.ok)throw new Error(`Fetch failed with status - ${n.status}, ${n.statusText}`);return(n.headers.get("content-type")||"").includes("application/json")?[await n.json(),null]:[await n.text(),null]}catch(n){return console.warn(n),[null,n]}},m=async e=>{const t=`https://official-joke-api.appspot.com/jokes/${e}`;try{const n=await fetch(t);if(!n.ok)throw new Error(`Fetch failed with status - ${n.status}, ${n.statusText}`);return(n.headers.get("content-type")||"").includes("application/json")?[await n.json(),null]:[await n.text(),null]}catch(n){return console.warn(n),[null,n]}},u=()=>{try{return JSON.parse(localStorage.getItem("score"))}catch(e){return console.warn(e),null}},d=()=>{try{return JSON.parse(localStorage.getItem("hiscore"))}catch(e){return console.warn(e),null}},S=e=>{const t=u();localStorage.setItem("score",JSON.stringify(t+e)),x(t+e)},x=e=>{const t=d();e>t&&localStorage.setItem("hiscore",JSON.stringify(e))},f=()=>{localStorage.setItem("score",JSON.stringify(0))},w=()=>{localStorage.setItem("hiscore",JSON.stringify(0))},E=()=>{f()},h=e=>{const t=document.createElement("div");t.classList.add("flex-box");const n=document.createElement("button");n.textContent="Punchline!",n.dataset.jokeId=e.id;const s=document.createElement("button");return s.textContent="Guess",s.dataset.jokeId=e.id,t.append(s,n),t},L=(e,t)=>(e.innerHTML=`<p>${t.setup}</p>`,e.dataset.jokeId=t.id,e.dataset.answered="false",e.classList.add("flex-box"),e.append(h(t)),e),g=e=>{const t=document.querySelector("#score-tracker");t.textContent=`Current Score: ${u()} | High Score: ${d()}`,document.querySelector("ul").innerHTML="";for(const n of e[0]){const s=L(document.createElement("li"),n);document.querySelector("ul").append(s)}},b=(e,t)=>{const n=document.querySelector("#guessGame");n.replaceChildren();const s=document.createElement("div");s.classList.add("modal-content","column-flex-box"),s.innerHTML=`
  <div class="flex-box">
    <h2>${e.setup}</h2>
    <span class="close">&times;</span>
  </div>
  `;const o=document.createElement("div");o.classList.add("grid-2-column"),n.style.display="block";const r=new Map;r.set(e.id,e);const a=Math.floor(Math.random()*4);let i=0;for(;i<4;){const l=Math.floor(Math.random()*t.length);if(a===i){const c=document.createElement("button");c.dataset.correct=!0,c.textContent=e.punchline,o.append(c),i++}else{if(r.has(t[l].id))continue;{r.set(t[l].id,t[l]);const c=document.createElement("button");c.dataset.correct=!1,c.textContent=t[l].punchline,o.append(c),i++}}}s.append(o),n.append(s)},C=async()=>{const e=document.querySelectorAll("li");for(const t of e)if(t.children[0].textContent===y){const n=await m(t.dataset.jokeId);t.dataset.answered==="false"?t.append(h(n[0])):t.innerHTML=`<p>${n[0].setup}</p><p>    </p><p>${n[0].punchline}</p>`}},J=async e=>{e.preventDefault();const t=document.querySelector("#jokeTypeSelect").value;g(await p(t)),e.target.reset()};let y="placeholder";const $=async e=>{if(e.target.matches("button")){const t=await m(e.target.dataset.jokeId);if(e.target.textContent==="Punchline!")e.target.parentElement.parentElement.innerHTML=`<p>${t[0].setup}</p><p>    </p><p>${t[0].punchline}</p>`;else if(e.target.textContent==="Guess"){const n=await p();b(t[0],n[0]),y=t[0].setup,e.target.parentElement.parentElement.innerHTML=`<p>${t[0].setup}</p>`}}},k=async e=>{if(e.target.matches("button")){const t=e.target.parentElement.parentElement.children[0].children[0].textContent;if(e.target.dataset.correct==="true"){document.querySelector("#guessGame").innerHTML=`
    <div class="flex-box modal-content">
      <h2>Ha Ha! Yeah!!</h2>
      <span class="close">&times;</span>
    </div>
    `;const s=document.querySelectorAll("li");for(const o of s)o.children[0].textContent===t&&(o.dataset.answered="true");S(1)}else document.querySelector("#guessGame").innerHTML=`
    <div class="flex-box modal-content">
      <h2>Nah. thats not it...</h2>
      <span class="close">&times;</span>
    </div>
    `,E();const n=document.querySelector("#score-tracker");n.textContent=`Current Score: ${u()} | High Score: ${d()}`}},H=async e=>{!e.target.matches(".close")&&e.target.matches("div, div > *")||(e.currentTarget.style.display="none",C())},q=async()=>{u()||f(),d()||w(),g(await p()),document.querySelector("form").addEventListener("submit",J),document.querySelector("ul").addEventListener("click",$),document.querySelector("#guessGame").addEventListener("click",k),document.querySelector("#guessGame").addEventListener("click",H)};q();
